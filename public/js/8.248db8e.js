(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{ATvP:function(e,s,t){"use strict";var n=t("pER4"),a=t.n(n);a.a},YHgW:function(e,s,t){"use strict";t.r(s);var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"ABOUT"},[t("q-card",{staticClass:"bg-white"},[e.spinner?t("div",{staticClass:"loader"}):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12",attrs:{align:"right"}},[t("q-btn",{attrs:{slot:"right"},on:{click:function(s){e.addnews()}},slot:"right"},[e._v("ADD News")])],1)]),t("q-table",{attrs:{data:e.tableData,title:"News",columns:e.columns,color:"black",filter:e.filter,separator:e.separator,"row-key":"name",loading:e.loading},scopedSlots:e._u([{key:"top-right",fn:function(s){return[t("q-search",{staticClass:"col-12",model:{value:e.filter,callback:function(s){e.filter=s},expression:"filter"}})]}},{key:"body",fn:function(s){return t("q-tr",{staticClass:"cursor-pointer",attrs:{props:s}},[e._l(s.cols,function(n){return t("q-td",{key:n.name,attrs:{props:s}},[e._v("\n         "+e._s(n.value)+"\n       ")])}),t("q-td",[t("q-btn",{staticClass:"q-mr-xs",attrs:{color:"green",icon:"edit"},on:{click:function(t){e.editNewsData(s.row)}}})],1)],2)}}])})],1),t("q-modal",{attrs:{"no-backdrop-dismiss":"","content-css":{minWidth:"70vw"}},model:{value:e.newsModalAdd,callback:function(s){e.newsModalAdd=s},expression:"newsModalAdd"}},[t("q-modal-layout",[t("q-toolbar",{staticClass:"bg-secondary",attrs:{slot:"header"},slot:"header"},[e.addNewsDiv?t("q-toolbar-title",[e._v("\n          Create News\n        ")]):e._e(),e.editNewsDiv?t("q-toolbar-title",[e._v("\n          Edit News\n        ")]):e._e(),t("q-btn",{staticStyle:{float:"right"},attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(s){e.closePopUp()}}})],1),t("div",{staticClass:"q-pa-lg"},[t("div",{staticClass:"row gutter-sm q-mb-md"},[t("div",{staticClass:"col-lg-4 col-md-4 col-sm-4 col-xs-4"},[t("q-input",{attrs:{min:"0","border-line":"green","float-label":"Title"},model:{value:e.news_title,callback:function(s){e.news_title=s},expression:"news_title"}}),e.news_title_err_msg?t("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please enter the News Title.\n           ")]):e._e()],1),t("div",{staticClass:"col-lg-4 col-md-4 col-sm-4 col-xs-4"},[t("q-datetime",{attrs:{type:"date",color:"blue","float-label":"Enter Date"},model:{value:e.news_date,callback:function(s){e.news_date=s},expression:"news_date"}}),e.news_date_err_msg?t("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please Select the News Date.\n           ")]):e._e()],1),t("div",{staticClass:"col-lg-4 col-md-4 col-sm-4 col-xs-4"},[t("q-input",{attrs:{min:"0","border-line":"green","float-label":"Source"},model:{value:e.news_source,callback:function(s){e.news_source=s},expression:"news_source"}}),e.news_source_err_msg?t("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please enter the News Source.\n            ")]):e._e()],1)]),t("div",{staticClass:"row gutter-sm q-mb-md"},[t("div",{staticClass:"col-lg-6 col-md-6 col-sm-6 col-xs-12"},[t("q-input",{attrs:{min:"0",type:"text","border-line":"green","float-label":"Hyper Link"},model:{value:e.news_hyper_link,callback:function(s){e.news_hyper_link=s},expression:"news_hyper_link"}}),e.news_hyper_link_err_msg?t("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n            * Please enter Hyper Link.\n            ")]):e._e()],1),t("div",{staticClass:"col-lg-6 col-md-6 col-sm-6 col-xs-12"},[t("q-input",{attrs:{type:"text","border-line":"green","float-label":"Video Link"},model:{value:e.news_video_link,callback:function(s){e.news_video_link=s},expression:"news_video_link"}}),e.news_video_link_err_msg?t("div",{staticClass:"msg"},[e._v("\n            * Please enter Video Link.\n            ")]):e._e()],1)]),t("div",{staticClass:"row gutter-sm q-mb-md"},[t("div",{staticClass:"col-lg-8 col-md-8 col-sm-10 col-xs-12"},[t("q-input",{attrs:{min:"0",type:"textarea",rows:"3","float-label":"Breif Description"},model:{value:e.news_desc,callback:function(s){e.news_desc=s},expression:"news_desc"}}),e.news_desc_err_msg?t("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please enter the News Description.\n             ")]):e._e()],1),t("div",{staticClass:"col-lg-4 col-md-4 col-sm-2 col-xs-12 self-end"},[t("input",{ref:"file",attrs:{type:"file",multiple:""},on:{change:e.onFileChange}})])]),t("div",{staticClass:"row gutter-sm q-mt-sm"},e._l(e.uploadedImages,function(s,n){return s?t("div",{key:n,staticClass:"col-lg-3 col-md-3 col-sm-2 col-xs-12 self-start"},[t("img",{staticStyle:{width:"200px",height:"150px"},attrs:{src:s}}),t("q-btn",{staticStyle:{"vertical-align":"top","margin-left":"5px"},attrs:{slot:"right",round:"",size:"xs",color:"negative",icon:"close"},on:{click:function(t){e.removeimageData(s)}},slot:"right"})],1):e._e()})),t("div",{staticClass:"row justify-end q-mt-md"},[t("div",{staticClass:"col-lg-3 col-md-3 col-sm-3 col-xs-12"},[t("q-btn",{staticClass:"full-width",attrs:{disabled:e.disableSbtn},on:{click:function(s){e.submitNewsData()}}},[e._v("\n                 SUBMIT\n               ")])],1)])])],1)],1)],1)},a=[];n._withStripped=!0;t("SRfc"),t("KKXr"),t("f3/d"),t("rGqo");var i=t("lSNA"),l=t.n(i),o={data:function(){var e;return e={userId:"",loading:"",tableData:[],separator:"cell",addNewsDiv:!1,newsModalAdd:!1,editNewsDiv:!1,disableSbtn:!1},l()(e,"newsModalAdd",!1),l()(e,"filter",""),l()(e,"columns",[{name:"Title",required:!0,label:"Title",align:"center",field:"title",sortable:!0,descending:!1},{name:"Date",label:"Date",align:"center",field:"date",sortable:!0},{name:"Source",label:"Source",align:"center",field:"source",sortable:!0},{name:"Hyper link",label:"Hyper Link",align:"center",field:"hyper_link",sortable:!0}]),l()(e,"news_title",""),l()(e,"news_date",""),l()(e,"news_source",""),l()(e,"news_hyper_link",""),l()(e,"news_video_link",""),l()(e,"news_desc",""),l()(e,"news_imgs",[]),l()(e,"news_title_err_msg",""),l()(e,"news_date_err_msg",""),l()(e,"news_source_err_msg",""),l()(e,"news_hyper_link_err_msg",""),l()(e,"news_video_link_err_msg",""),l()(e,"news_desc_err_msg",""),l()(e,"uploadedImages",[]),l()(e,"newsImg",[]),l()(e,"image",[]),l()(e,"firebase_key",""),l()(e,"news_date",(new Date).getTime()),l()(e,"spinner",!1),e},created:function(){var e=this;firebase.auth().onAuthStateChanged(function(s){e.userId=s.uid}),e.updateDataTable()},methods:{updateDataTable:function(){var e=this;e.loading=!0,setTimeout(function(){e.loading=!1},2e3),e.getNewsData()},getNewsData:function(){var e=this;e.tableData=[],firebase.database().ref("news").orderByChild("userid/uid").once("value",function(s){s.forEach(function(s){""!==s.val().title&&e.tableData.push({title:s.val().title,date:new Date(s.val().news_date).toLocaleDateString(),source:s.val().source,hyper_link:s.val().hyper_link,video_link:s.val().video_link,key:s.key})})})},addnews:function(){var e=this;e.addNewsDiv=!0,e.newsModalAdd=!0},editNewsData:function(e){var s=this;s.editNewsDiv=!0,s.newsModalAdd=!0,firebase.database().ref("news").orderByChild("userid/uid").once("value",function(t){t.forEach(function(t){t.key===e.key&&(s.news_title=t.val().title,s.news_date=new Date(t.val().news_date).toLocaleDateString(),s.news_source=t.val().source,s.news_hyper_link=t.val().hyper_link,s.news_video_link=t.val().video_link,s.news_desc=t.val().min_desc,s.uploadedImages=t.val().images_links,s.firebase_key=t.key)})})},closePopUp:function(){var e=this;e.emtpyAllFields(),e.deleteimagesclose(),e.newsModalAdd=!1},deleteimagesclose:function(){var e=this;e.uploadedImages.forEach(function(e){console.log(e)})},emtpyAllFields:function(){var e=this;e.news_title="",e.news_date="",e.news_source="",e.news_hyper_link="",e.news_video_link="",e.news_desc="",e.addNewsDiv=!1,e.editNewsDiv=!1,e.uploadedImages=[],e.spinner=!1},submitNewsData:function(){var e=this;e.validationFornewsData()?(!0===e.addNewsDiv&&e.addNewsData(),!0===e.editNewsDiv&&e.editNewData()):console.log(e.validationFornewsData())},addNewsData:function(){var e=this,s=this.news_title,t=this.news_desc,n=this.news_date,a=this.news_source,i=this.news_hyper_link,l=this.news_video_link,o=this.uploadedImages,r={title:s,min_desc:t,news_date:n,source:a,hyper_link:i,video_link:l,images_links:o};firebase.database().ref("news").push(r).then(function(s){swal({title:"News Published!",icon:"success"}),e.closePopUp()},function(e){})},imageUpload:function(){for(var e=this,s=function(){var s=firebase.storage().ref("All_Image_Uploads"),n=+new Date+"-"+e.newsImg[t].name,a={contentType:e.newsImg[t].type},i=s.child(n).put(e.newsImg[t],a);i.on("state_changed",function(s){e.spinner=!0;s.bytesTransferred,s.totalBytes;switch(s.state){case firebase.storage.TaskState.PAUSED:break;case firebase.storage.TaskState.RUNNING:break}},function(e){console.log(e)},function(){i.snapshot.ref.getDownloadURL().then(function(s){e.uploadedImages.push(s)})})},t=0;t<e.newsImg.length;t++)s()},editNewData:function(){var e=this.news_title,s=this.news_desc,t=this.news_date,n=this.news_source,a=this.news_hyper_link,i=this.news_video_link,l=(this.uploadedImages,{title:e,min_desc:s,news_date:t,source:n,hyper_link:a,video_link:i,images_links:this.uploadedImages});console.log(l),firebase.database().ref("news").child(this.firebase_key).set(l).then(function(){console.log("User's data updated"),this.$q.notify({color:"green",textColor:"white",message:"Data has been updated succussfully",position:"bottom-left",timeout:3e3}),this.newsModalAdd=!1}),this.closePopUp(),this.updateDataTable()},fieldStatus:function(){var e=this;""!==e.news_title&&""!==e.news_date&&""!==e.news_source&&""!==e.news_hyper_link&&""!==e.news_video_link&&""!==e.news_desc?e.disableSbtn=!1:e.disableSbtn=!0},onFileChange:function(e){var s=this;s.spinner=!0,s.newsImg=e.target.files,console.log(s.newsImg),s.imageUpload(),setTimeout(function(){s.spinner=!1},4e3)},parseFirebaseImageUrl:function(e){var s=e.split("?")[0],t=s.split("/"),n=s.split("/").length;return t[n-1].split("%2F")[1]},removeimageData:function(e){var s=this;console.log(e);var t=e;e=s.parseFirebaseImageUrl(e),console.log(e);var n=firebase.storage().ref(),a=n.child("All_Image_Uploads/"+e);a.delete().then(function(){console.log("successfully removed image from storage");var e=s.uploadedImages.indexOf(t);console.log(t),console.log(e),e>-1&&s.uploadedImages.splice(e,1)}).catch(function(e){console.log("Something went wrong while removing image")})},validationFornewsData:function(){return""===this.news_title?(this.news_title_err_msg=!0,!1):(this.news_title_err_msg=!1,""===this.news_date?(this.news_date_err_msg=!0,!1):(this.news_date_err_msg=!1,""===this.news_source?(this.news_source_err_msg=!0,!1):(this.news_source_err_msg=!1,null==this.news_hyper_link.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)?(this.news_hyper_link_err_msg=!0,!1):(this.news_hyper_link_err_msg=!1,""===this.news_desc?(this.news_desc_err_msg=!0,!1):(this.news_desc_err_msg=!1,!0)))))}}},r=o,c=(t("ATvP"),t("KHd+")),d=Object(c["a"])(r,n,a,!1,null,null,null);s["default"]=d.exports},pER4:function(e,s,t){}}]);