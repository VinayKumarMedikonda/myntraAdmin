(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{ATvP:function(e,t,s){"use strict";var a=s("pER4"),n=s.n(a);n.a},YHgW:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ABOUT"},[s("q-card",{staticClass:"bg-white"},[e.spinner?s("div",{staticClass:"loader"}):e._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12 col-md-12 col-sm-12 col-xs-12",attrs:{align:"right"}},[s("q-btn",{attrs:{slot:"right"},on:{click:function(t){e.addnews()}},slot:"right"},[e._v("ADD News")])],1)]),s("q-table",{attrs:{data:e.tableData,title:"News",columns:e.columns,color:"black",filter:e.filter,separator:e.separator,"row-key":"name",loading:e.loading},scopedSlots:e._u([{key:"top-right",fn:function(t){return[s("q-search",{staticClass:"col-12",model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]}},{key:"body",fn:function(t){return s("q-tr",{staticClass:"cursor-pointer",attrs:{props:t}},[e._l(t.cols,function(a){return s("q-td",{key:a.name,attrs:{props:t}},[e._v("\n         "+e._s(a.value)+"\n       ")])}),s("q-td",[s("q-btn",{staticClass:"q-mr-xs",attrs:{color:"green",icon:"edit"},on:{click:function(s){e.editNewsData(t.row)}}})],1)],2)}}])})],1),s("q-modal",{attrs:{"no-backdrop-dismiss":"","content-css":{minWidth:"70vw"}},model:{value:e.newsModalAdd,callback:function(t){e.newsModalAdd=t},expression:"newsModalAdd"}},[s("q-modal-layout",[s("q-toolbar",{staticClass:"bg-secondary",attrs:{slot:"header"},slot:"header"},[e.addNewsDiv?s("q-toolbar-title",[e._v("\n          Create News\n        ")]):e._e(),e.editNewsDiv?s("q-toolbar-title",[e._v("\n          Edit News\n        ")]):e._e(),s("q-btn",{staticStyle:{float:"right"},attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:function(t){e.closePopUp()}}})],1),s("div",{staticClass:"q-pa-lg"},[s("div",{staticClass:"row gutter-sm q-mb-md"},[s("div",{staticClass:"col-lg-4 col-md-4 col-sm-4 col-xs-4"},[s("q-input",{attrs:{min:"0","border-line":"green","float-label":"Title *"},model:{value:e.news_title,callback:function(t){e.news_title=t},expression:"news_title"}}),e.news_title_err_msg?s("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please enter the News Title.\n           ")]):e._e()],1),s("div",{staticClass:"col-lg-4 col-md-4 col-sm-4 col-xs-4"},[s("q-datetime",{attrs:{type:"date",color:"blue","float-label":"Enter Date *"},model:{value:e.news_date,callback:function(t){e.news_date=t},expression:"news_date"}}),e.news_date_err_msg?s("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please Select the News Date.\n           ")]):e._e()],1),s("div",{staticClass:"col-lg-4 col-md-4 col-sm-4 col-xs-4"},[s("q-input",{attrs:{min:"0","border-line":"green","float-label":"Source *"},model:{value:e.news_source,callback:function(t){e.news_source=t},expression:"news_source"}}),e.news_source_err_msg?s("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please enter the News Source.\n            ")]):e._e()],1)]),s("div",{staticClass:"row gutter-sm q-mb-md"},[s("div",{staticClass:"col-lg-6 col-md-6 col-sm-6 col-xs-12"},[s("q-input",{attrs:{min:"0",type:"text","border-line":"green","float-label":"Enter url *"},model:{value:e.news_hyper_link,callback:function(t){e.news_hyper_link=t},expression:"news_hyper_link"}}),e.news_hyper_link_err_msg?s("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n            * Please enter Valid Url Link.\n            ")]):e._e()],1),s("div",{staticClass:"col-lg-6 col-md-6 col-sm-6 col-xs-12"},[s("q-input",{attrs:{type:"text","border-line":"green","float-label":"Video Link"},model:{value:e.news_video_link,callback:function(t){e.news_video_link=t},expression:"news_video_link"}}),e.news_video_link_err_msg?s("div",{staticClass:"msg"},[e._v("\n            * Please enter Video Link.\n            ")]):e._e()],1)]),s("div",{staticClass:"row gutter-sm q-mb-md"},[s("div",{staticClass:"col-lg-8 col-md-8 col-sm-10 col-xs-12"},[s("q-input",{attrs:{min:"0",type:"textarea",rows:"3","float-label":"Breif Description *"},model:{value:e.news_desc,callback:function(t){e.news_desc=t},expression:"news_desc"}}),e.news_desc_err_msg?s("div",{staticClass:"msg",staticStyle:{color:"red","font-size":"14px","padding-top":"10px"}},[e._v("\n             * Please enter the News Description.\n             ")]):e._e()],1),s("div",{staticClass:"col-lg-4 col-md-4 col-sm-2 col-xs-12 self-end"},[s("input",{ref:"file",attrs:{type:"file",multiple:""},on:{change:e.onFileChange}})])]),s("div",{staticClass:"row gutter-sm q-mt-sm"},[e._l(e.uploadedImages,function(t,a){return t?s("div",{key:a,staticClass:"col-lg-3 col-md-3 col-sm-2 col-xs-12 self-start"},[s("img",{staticStyle:{width:"200px",height:"150px"},attrs:{src:t}}),s("q-btn",{staticClass:"qbt_close",staticStyle:{"margin-bottom":"300px"},attrs:{slot:"right",round:"",size:"xs",color:"negative",icon:"close"},on:{click:function(s){e.removeimageData(t)}},slot:"right"})],1):e._e()}),e.newsStatus?s("div",{staticClass:"col-lg-4 col-md-4 col-sm-6 col-xs-12",staticStyle:{"padding-top":"30px"}},[s("q-toggle",{attrs:{color:"green",label:"Active","left-label":""},model:{value:e.checkStatus,callback:function(t){e.checkStatus=t},expression:"checkStatus"}})],1):e._e()],2),s("div",{staticClass:"row justify-end q-mt-md"},[s("div",{staticClass:"col-lg-3 col-md-3 col-sm-3 col-xs-12"},[s("q-btn",{staticClass:"full-width",attrs:{disabled:e.disableSbtn},on:{click:function(t){e.submitNewsData()}}},[e._v("\n                 SUBMIT\n               ")])],1)])])],1)],1)],1)},n=[];a._withStripped=!0;s("SRfc"),s("KKXr"),s("f3/d"),s("rGqo");var i=s("lSNA"),l=s.n(i),o={data:function(){var e;return e={userId:"",loading:"",tableData:[],separator:"cell",addNewsDiv:!1,newsModalAdd:!1,editNewsDiv:!1,disableSbtn:!1},l()(e,"newsModalAdd",!1),l()(e,"filter",""),l()(e,"columns",[{name:"Title",required:!0,label:"Title",align:"center",field:"title",sortable:!0},{name:"Date",label:"News Date",align:"center",field:"date",sortable:!0,descending:!1},{name:"Source",label:"Source",align:"center",field:"source",sortable:!0}]),l()(e,"news_title",""),l()(e,"news_date",""),l()(e,"news_source",""),l()(e,"news_hyper_link",""),l()(e,"news_video_link",""),l()(e,"news_desc",""),l()(e,"news_imgs",[]),l()(e,"news_title_err_msg",""),l()(e,"news_date_err_msg",""),l()(e,"news_source_err_msg",""),l()(e,"news_hyper_link_err_msg",""),l()(e,"news_video_link_err_msg",""),l()(e,"news_desc_err_msg",""),l()(e,"uploadedImages",[]),l()(e,"newsImg",[]),l()(e,"image",[]),l()(e,"firebase_key",""),l()(e,"newsStatus",!0),l()(e,"checkStatus",""),l()(e,"news_date",""),l()(e,"spinner",!1),e},created:function(){var e=this;firebase.auth().onAuthStateChanged(function(t){e.userId=t.uid}),e.updateDataTable()},methods:{updateDataTable:function(){var e=this;e.tableData=[],e.tableData.length=0,e.loading=!0,setTimeout(function(){e.loading=!1},1e3),e.getNewsData()},getNewsData:function(){var e=this;e.tableData=[],firebase.database().ref("news").orderByChild("news_date").once("value",function(t){t.forEach(function(t){""!==t.val().title&&e.tableData.push({title:t.val().title,date:new Date(t.val().news_date).toLocaleDateString(),source:t.val().source,video_link:t.val().video_link,key:t.key})}),e.tableData.reverse()})},addnews:function(){var e=this;e.addNewsDiv=!0,e.newsModalAdd=!0},editNewsData:function(e){var t=this;t.newsStatus=!0,t.editNewsDiv=!0,t.newsModalAdd=!0,firebase.database().ref("news").orderByChild("userid/uid").once("value",function(s){s.forEach(function(s){s.key===e.key&&(t.news_title=s.val().title,t.news_date=s.val().news_date,t.news_source=s.val().source,t.news_hyper_link=s.val().hyper_link,t.news_video_link=s.val().video_link,t.news_desc=s.val().min_desc,t.uploadedImages=s.val().images_links,t.firebase_key=s.key,t.checkStatus=s.val().is_active)})})},closePopUp:function(){var e=this;e.emtpyAllFields(),e.deleteimagesclose(),e.newsModalAdd=!1},deleteimagesclose:function(){var e=this;e.uploadedImages.forEach(function(e){console.log(e)})},emtpyAllFields:function(){var e=this;e.news_title="",e.news_date="",e.news_source="",e.news_hyper_link="",e.news_video_link="",e.news_desc="",e.addNewsDiv=!1,e.editNewsDiv=!1,e.uploadedImages=[],e.newsStatus=!1},submitNewsData:function(){var e=this;e.validationFornewsData()?(!0===e.addNewsDiv&&(e.addNewsData(),e.updateDataTable(),e.closePopUp()),!0===e.editNewsDiv&&(e.editNewData(),e.updateDataTable(),e.closePopUp())):console.log(e.validationFornewsData())},addNewsData:function(){var e=this,t=this.news_title,s=this.news_desc,a=this.news_date,n=this.news_source,i=this.news_hyper_link,l=this.news_video_link;if(0!==this.uploadedImages.length)var o=this.uploadedImages;else o=[];var r=this.checkStatus,c={title:t,min_desc:s,news_date:new Date(a).getTime(),source:n,hyper_link:i,video_link:l,images_links:o,is_active:r};firebase.database().ref("news").push(c).then(function(t){e.$q.notify({color:"green",textColor:"white",message:"News Published successfully.",position:"bottom-right",timeout:3e3})},function(e){})},imageUpload:function(){for(var e=this,t=function(){var t=firebase.storage().ref("All_Image_Uploads"),a=+new Date+"-"+e.newsImg[s].name,n={contentType:e.newsImg[s].type},i=t.child(a).put(e.newsImg[s],n);i.on("state_changed",function(e){e.bytesTransferred,e.totalBytes;switch(e.state){case firebase.storage.TaskState.PAUSED:break;case firebase.storage.TaskState.RUNNING:break}},function(t){e.$q.notify({color:"black",textColor:"white",message:"Something went wrong.Please reupload the image",position:"bottom-right",timeout:3e3}),e.spinner=!1},function(){i.snapshot.ref.getDownloadURL().then(function(t){e.uploadedImages.push(t)})})},s=0;s<e.newsImg.length;s++)t()},editNewData:function(){var e=this,t=e.news_title,s=e.news_desc,a=e.news_date,n=e.news_source,i=e.news_hyper_link,l=e.news_video_link,o=(e.uploadedImages,e.checkStatus,{title:t,min_desc:s,news_date:a,source:n,hyper_link:i,video_link:l,images_links:e.uploadedImages,is_active:e.checkStatus});console.log(o),firebase.database().ref("news").child(this.firebase_key).set(o).then(function(){console.log("User's data updated"),e.$q.notify({color:"green",textColor:"white",message:"News has been updated succussfully",position:"bottom-left",timeout:3e3}),e.newsModalAdd=!1}),e.closePopUp()},fieldStatus:function(){var e=this;""!==e.news_title&&""!==e.news_date&&""!==e.news_source&&""!==e.news_hyper_link&&""!==e.news_video_link&&""!==e.news_desc?e.disableSbtn=!1:e.disableSbtn=!0},onFileChange:function(e){var t=this;t.spinner=!0,t.newsImg=e.target.files,t.imageUpload(),setTimeout(function(){t.spinner=!1},3e3)},parseFirebaseImageUrl:function(e){var t=e.split("?")[0],s=t.split("/"),a=t.split("/").length;return s[a-1].split("%2F")[1]},removeimageData:function(e){var t=this;console.log(e);var s=e;e=t.parseFirebaseImageUrl(e),console.log(e);var a=firebase.storage().ref(),n=a.child("All_Image_Uploads/"+e);n.delete().then(function(){console.log("successfully removed image from storage");var e=t.uploadedImages.indexOf(s);console.log(s),console.log(e),e>-1&&t.uploadedImages.splice(e,1)}).catch(function(e){console.log("Something went wrong while removing image"),console.log(index)})},validationFornewsData:function(){return""===this.news_title?(this.news_title_err_msg=!0,!1):(this.news_title_err_msg=!1,""===this.news_date?(this.news_date_err_msg=!0,!1):(this.news_date_err_msg=!1,""===this.news_source?(this.news_source_err_msg=!0,!1):(this.news_source_err_msg=!1,null==this.news_hyper_link.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g)?(this.news_hyper_link_err_msg=!0,!1):(this.news_hyper_link_err_msg=!1,""===this.news_desc?(this.news_desc_err_msg=!0,!1):(this.news_desc_err_msg=!1,!0)))))}}},r=o,c=(s("ATvP"),s("KHd+")),d=Object(c["a"])(r,a,n,!1,null,null,null);t["default"]=d.exports},pER4:function(e,t,s){}}]);